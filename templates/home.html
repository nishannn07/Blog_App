<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap 5 JS (needed for navbar toggler) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
    .form-container {
        display: flex;
        align-items: center;
            padding: 30px;
            border: 2px solid rgb(189, 193, 211);
            background-color: white;
            border-radius: 20px;
            align-items: center;
            box-sizing: border-box;
            box-shadow: 2px 2px 4px rgb(53, 81, 207);
            gap: 30px;
    }

     form input {
            padding: 10px;
            width: 90%;
            border-radius: 10px;
            border: 2px solid rgb(177, 182, 197);
            margin: 10px;
        
        }
        form input[type='submit'] {
            /* background-color: #6366f1; */
            color: white;
            padding: 5px;
            height: 140px;
            /* border: 2px solid #1e1f21; */
            box-sizing: border-box;
            box-shadow: 2px 2px 4px rgb(0, 1, 3);
        }

        form input:focus {
            outline: none;
            border: 2px solid rgb(182, 182, 233);
            box-sizing: border-box;
            box-shadow: 1px 1px 4px rgb(53, 81, 207);
        }
        form textarea:focus {
            outline: none;
            border: 2px solid rgb(182, 182, 233);
            box-sizing: border-box;
            box-shadow: 2px 2px 4px rgb(53, 81, 207);
        }

        form input[type='submit']:hover {
            box-sizing: border-box;
            box-shadow: 1px 1px 2px rgb(53, 81, 207);
        }

        form textarea {
            /* background-color: #ebebf1; */
            width: 100%;
            padding: 10px;
            height: 240px;
            border-radius: 10px;
            border: 2px solid rgb(177, 182, 197);
            margin: 10px;
        }

        .post-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            border: 2px solid #6366f1;
            margin: 50px auto;
            max-height: 800px;
            border-radius: 10px;
            padding: 20px;
            gap: 20px;
            width: 90%;
        }

        .post-item {
            border: 1px solid #6366f1;
            padding: 20px;
            width: 80%;
            
        }
        .post-item-title {
            font-size: 34px;
        }

</style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary p-3">
  <div class="container-fluid">
    <span class="navbar-brand">Navbar</span>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" href="/logout">Logout</a>
        </li>
      </ul>
      
    </div>
  </div>
</nav>

    <h1>Welcome, {{username}}</h1>
    <!-- <a href="/logout"><button>Logout</button></a> -->
    <br>

    <div class="container mt-5">
        <form class="form-container" method="post" action="/post">
                {{form.hidden_tag()}}
                <div class="d-flex row">
                {{form.title.label}}
                {{form.title}}
                {% for error in form.title.errors %}
                        <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                <!-- <label for="">Title</label>
                <input type="text"> -->
           
                {{form.post.label}}
                {{form.post}}
                <!-- <label for="">Post</label>
                <textarea name="" id=""></textarea> -->
                <label for="">Tags</label>
                <div class="d-flex flex-sm-nowrap">
                    <!-- <input type="text">
                    <input type="text">
                    <input type="text"> -->
                    {{ form.tag1 }}
                    {{ form.tag2 }}
                    {{ form.tag3 }}
                </div>
            </div>
            <div>
                <!-- <input type="submit" value="Draft">
                <input type="submit" value="Post"> -->
                {{form.draft(class="btn btn-secondary")}}
                {{form.submit(class="btn btn-primary")}}
            </div>
    </form>
    </div>

    <div class="post-container">
      <h1>Drafts</h1>
        {% for f, draft in combined %}
            <form class="form-container" method="POST" action="{{ url_for('update_draft', draft_id=draft.id) }}">
                {{ f.hidden_tag() }}
                
                <div>
                  {{ f.title.label }} {{ f.title(class="form-control") }}
                  {{ f.post.label }} {{ f.post(class="form-control") }}
                  <label for="">Tags</label>
                  <div class="d-flex flex-sm-nowrap">
                    {{ f.tag1() }} {{ f.tag2() }} {{ f.tag3() }}
                  </div>
                </div>
                
                <div>
                  {{ f.submit(class="btn btn-primary") }}
                  {{ f.draft(class="btn btn-secondary") }}
                </div>
                
            </form>
        
        {% endfor %}


    </div>

    
    <div class="post-container">
      <h1>Posts</h1>
        {% for post in posts %}
            <div class="post-item">
                <div class="post-item-title">{{ post.title}}</div>
                <form action="{{ url_for('delete_post', post_id=post.id) }}" method="post" style="display: inline;">
                  <button class="btn btn-danger"  onclick="return confirm('Are you sure you want to delete this post?')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                      <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
                    </svg>
                  </button>

                </form>
                <div >{{post.content}}</div>
                <div class="contaier">
                {% for tag in post.tags %}
                  <span class="text-primary">#{{tag.name}}</span>
                {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
</body>
</html>